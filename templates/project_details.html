{% extends "base.html" %}

{% block title %}{{ project.name }} - Keyword Research Tool{% endblock %}

{% block content %}
<div class="card">
    <h2>{{ project.name }}</h2>
    
    <div style="margin-bottom: 30px;">
        <p><strong>Project ID:</strong> {{ project.id }}</p>
        <p><strong>Created:</strong> {{ project.created_at }}</p>
        <p><strong>Location:</strong> {{ project.geo }} | {{ project.language }}</p>
        <p><strong>Focus:</strong> <span class="badge badge-info">{{ project.focus }}</span></p>
        <p><strong>Status:</strong> 
            {% if project.last_checkpoint == 'completed' %}
                <span class="badge badge-success">‚úÖ Completed</span>
            {% else %}
                <span class="badge badge-warning">‚è≥ {{ project.last_checkpoint }}</span>
            {% endif %}
        </p>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center;">
            <h3 style="color: #667eea; margin-bottom: 10px;">{{ project.keyword_count }}</h3>
            <p style="color: #666; margin: 0;">Keywords</p>
        </div>
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center;">
            <h3 style="color: #667eea; margin-bottom: 10px;">{{ project.total_volume|int }}</h3>
            <p style="color: #666; margin: 0;">Total Volume</p>
        </div>
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center;">
            <h3 style="color: #667eea; margin-bottom: 10px;">{{ project.avg_difficulty }}</h3>
            <p style="color: #666; margin: 0;">Avg Difficulty</p>
        </div>
    </div>
    
    <div style="margin-bottom: 30px;">
        <h3>Download Reports</h3>
        <a href="/api/project/{{ project.id }}/export/keywords" class="btn btn-secondary">üì• Download Keywords CSV</a>
        <a href="/api/project/{{ project.id }}/export/briefs" class="btn btn-secondary" style="margin-left: 10px;">üì• Download Briefs CSV</a>
        <a href="/api/project/{{ project.id }}/export/calendar" class="btn btn-secondary" style="margin-left: 10px;">üì• Download Calendar CSV</a>
    </div>
</div>

{% if keywords %}
<div class="card">
    <h2>Top 50 Keywords by Opportunity</h2>
    <table>
        <thead>
            <tr>
                <th>Keyword</th>
                <th>Intent</th>
                <th>Volume</th>
                <th>CPC</th>
                <th>Difficulty</th>
                <th>Opportunity</th>
            </tr>
        </thead>
        <tbody>
        {% for kw in keywords %}
            <tr>
                <td><strong>{{ kw.text }}</strong></td>
                <td>
                    {% if kw.intent == 'informational' %}
                        <span class="badge badge-info">{{ kw.intent }}</span>
                    {% elif kw.intent == 'commercial' %}
                        <span class="badge badge-warning">{{ kw.intent }}</span>
                    {% elif kw.intent == 'transactional' %}
                        <span class="badge badge-success">{{ kw.intent }}</span>
                    {% else %}
                        <span class="badge">{{ kw.intent }}</span>
                    {% endif %}
                </td>
                <td>{{ kw.volume|int }}</td>
                <td>{{ kw.cpc }}</td>
                <td>{{ kw.difficulty }}</td>
                <td>{{ kw.opportunity }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

<div style="text-align: center; margin-top: 30px;">
    <a href="/projects" class="btn">‚Üê Back to All Projects</a>
</div>
{% endblock %}
